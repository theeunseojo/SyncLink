# 📋 SyncLink (언제비어) 기획서

> **버전**: v1.0  
> **최종 수정**: 2024-12-24  
> **서비스 한줄 소개**: 친구들과 딱 맞는 시간을 3초 만에 찾는 일정 조율 서비스

---

## 📊 구현 현황 요약

| 화면 | 구현 상태 | 비고 |
|------|----------|------|
| #1 시작 화면 | 🟡 70% | 게스트 모드 미구현 |
| #2 방 만들기 | 🟡 80% | 시간대 설정 미구현 |
| #3 일정 수정 & 현황 | 🟡 60% | 히트맵 미구현, 1인1방 버그 |
| #4 투표 및 확정 | ⬜ 0% | 미구현 |
| #5 결과 공유 | ⬜ 0% | 미구현 |

---

## 🖥️ 화면 설계

### #1. 시작 화면 (Landing)

**목적**: 서비스 진입점, 로그인/게스트 분기

| 요소 | 구현 상태 | 설명 |
|------|----------|------|
| 로고 & 슬로건 | ✅ 완료 | 그라데이션 디자인 적용 |
| 구글 로그인 버튼 | ✅ 완료 | OAuth2 연동 |
| 게스트로 시작 버튼 | ⬜ 미구현 | 방 코드 입력으로 참여 |

```
┌─────────────────────────────────────┐
│                                     │
│           📅 언제비어               │
│   친구들과 딱 맞는 시간을 찾으세요    │
│                                     │
│   ┌─────────────────────────────┐   │
│   │  🔵 구글 계정으로 시작       │   │
│   └─────────────────────────────┘   │
│   ┌─────────────────────────────┐   │
│   │  👤 게스트로 시작 (TODO)     │   │
│   └─────────────────────────────┘   │
│                                     │
└─────────────────────────────────────┘
```

---

### #2. 방 만들기 (Create Room)

**목적**: 일정 조율 방 생성 및 초대 링크 발급

| 요소 | 구현 상태 | 설명 |
|------|----------|------|
| 약속 제목 입력 | ✅ 완료 | |
| 모드 선택 (날짜/시간) | 🟡 부분 | UI는 있으나 로직 미반영 |
| 날짜 범위 선택 | ✅ 완료 | datetime-local 사용 |
| 시간대 설정 (10~22시 등) | ⬜ 미구현 | 조율 가능 시간 제한 |
| 초대 링크 생성 | ✅ 완료 | UUID 기반 |

```
┌─────────────────────────────────────┐
│  🚀 방 만들기                        │
├─────────────────────────────────────┤
│  약속 이름: [백엔드 팀 회의        ] │
│                                     │
│  모드 선택:                         │
│  ┌──────────┐ ┌──────────┐         │
│  │ 📅 날짜  │ │ ⏰ 시간  │         │
│  └──────────┘ └──────────┘         │
│                                     │
│  기간: [12/24] ~ [12/31]            │
│  시간대: [10:00] ~ [22:00] (TODO)   │
│                                     │
│  ┌─────────────────────────────┐   │
│  │   방 생성하고 링크 복사하기   │   │
│  └─────────────────────────────┘   │
└─────────────────────────────────────┘
```

---

### #3. 개인 일정 수정 및 현황 (Availability & Heatmap)

**🔥 핵심 화면 - 서비스의 메인 기능**

#### 좌측: 내 일정 관리 (My Schedule)

| 요소 | 구현 상태 | 설명 |
|------|----------|------|
| 구글 캘린더 일정 표시 | ✅ 완료 | FullCalendar 사용 |
| 일정 토글 (회색 처리) | ✅ 완료 | IgnoredEvent 테이블 활용 |
| 수동 가능 시간 드래그 | ⬜ 미구현 | |

#### 우측: 그룹 현황 (Group Heatmap)

| 요소 | 구현 상태 | 설명 |
|------|----------|------|
| 빈 시간 계산 | ✅ 완료 | Sweeping Line Algorithm |
| 히트맵 (겹치는 인원수 시각화) | ⬜ 미구현 | 색상 농도 조절 |
| 참여 멤버 리스트 | ✅ 완료 | |
| 초대 링크 복사 | ✅ 완료 | |

```
┌──────────────────────┬──────────────────────┐
│  📅 내 일정          │  👥 그룹 현황        │
├──────────────────────┼──────────────────────┤
│  ┌────────────────┐  │  참여자: A, B, C     │
│  │ 팀 회의 (회색) │  │                      │
│  └────────────────┘  │  ┌────────────────┐  │
│  ┌────────────────┐  │  │ 히트맵 (TODO)  │  │
│  │ 점심 약속      │  │  │ ███ 3명 가능   │  │
│  └────────────────┘  │  │ ██░ 2명 가능   │  │
│                      │  │ █░░ 1명 가능   │  │
│                      │  └────────────────┘  │
├──────────────────────┴──────────────────────┤
│          [📋 초대 링크 복사]                │
└─────────────────────────────────────────────┘
```

---

### #4. 투표 및 확정 (Vote & Finalize)

**⬜ 미구현**

| 요소 | 구현 상태 | 설명 |
|------|----------|------|
| 필터링 (인원별/시간순/긴시간순) | ⬜ 미구현 | |
| 후보 시간대 투표 | ⬜ 미구현 | |
| 방장 확정 기능 | ⬜ 미구현 | |

```
┌─────────────────────────────────────┐
│  🗳️ 투표하기                        │
├─────────────────────────────────────┤
│  필터: [전체▼] [시간순▼] [2명이상▼] │
│                                     │
│  ┌───────────────────────────────┐ │
│  │ 12/25 14:00~16:00  ⭐⭐⭐     │ │
│  │ 👍 A, B, C                    │ │
│  └───────────────────────────────┘ │
│  ┌───────────────────────────────┐ │
│  │ 12/26 10:00~12:00  ⭐⭐       │ │
│  │ 👍 A, B                       │ │
│  └───────────────────────────────┘ │
│                                     │
│  (방장) [이 시간으로 확정하기]       │
└─────────────────────────────────────┘
```

---

### #5. 결과 공유 (Result Share)

**⬜ 미구현**

| 요소 | 구현 상태 | 설명 |
|------|----------|------|
| 확정 시간 표시 | ⬜ 미구현 | |
| 결과 텍스트 복사 | ⬜ 미구현 | |
| 구글 캘린더 추가 | ⬜ 미구현 | Calendar API write scope 필요 |

```
┌─────────────────────────────────────┐
│  ✅ 약속이 확정되었습니다!          │
├─────────────────────────────────────┤
│                                     │
│  📅 백엔드 팀 회의                  │
│  🕐 12/28(토) 14:00 ~ 16:00        │
│  👥 참여자: A, B, C, D              │
│                                     │
│  ┌─────────────────────────────┐   │
│  │  📋 결과 텍스트 복사         │   │
│  └─────────────────────────────┘   │
│  ┌─────────────────────────────┐   │
│  │  📅 구글 캘린더에 추가       │   │
│  └─────────────────────────────┘   │
└─────────────────────────────────────┘
```

**복사될 텍스트 예시:**
```
[모임 확정] 🎉
제목: 백엔드 팀 회의
시간: 12/28(토) 14:00 ~ 16:00
참여자: A, B, C, D
```

---

## 🗃️ 데이터 모델 (추가 필요)

### 현재 엔티티
- `Room` - 방 정보
- `Member` - 사용자 (⚠️ 1인 1방 문제 있음)
- `Event` - 구글 캘린더 일정
- `IgnoredEvent` - 무시된 일정

### 추가 필요 엔티티
- `RoomMember` - 방-멤버 다대다 관계 (1인 다방 해결)
- `Vote` - 투표 정보
- `ConfirmedSchedule` - 확정된 일정

---

## 🎯 개발 우선순위

### 🔴 Phase 1: 버그 수정 (진행중)
1. ~~GlobalExceptionHandler 버그~~ ✅
2. ~~엔티티 재설계 (1인 다방)~~ ✅
3. ~~기본키 전략 변경~~ ✅

### 🟠 Phase 2: 핵심 기능 완성
1. 히트맵 시각화
2. 시간대 설정 기능

### 🟡 Phase 3: 투표 기능
1. Vote 엔티티 및 API
2. 방장 확정 기능

#### 가능시간대 API 응답 스펙
```json
{
  "slots": [
    {
      "start": "2024-01-15T14:00:00",
      "end": "2024-01-15T16:00:00",
      "durationMinutes": 120,
      "availableMembers": [
        { "id": 1, "name": "홍길동" },
        { "id": null, "name": "게스트1" }
      ],
      "availableCount": 2,
      "totalMembers": 3,
      "votes": 3
    }
  ],
  "totalMembers": 3
}
```
- `votes`: 해당 시간대에 대한 투표수

### 🟢 Phase 4: 부가 기능
1. 게스트 모드
2. 결과 공유 (텍스트 복사)
3. 구글 캘린더 추가 (write scope)

---

## 📝 참고 사항

- **Sweeping Line Algorithm**: 빈 시간 계산에 사용 중 (`ScheduleService.findFreeTimes()`)
- **Google Calendar API**: 현재 `calendar.readonly` scope만 사용
- **실시간 동기화**: 현재 미지원 (새로고침 필요)
